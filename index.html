<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Tommy Jiang</title>

	<!--<link rel="icon" href="./favicon.ico" mce_href="./favicon.ico" type="image/x-icon">
-->
	<link rel="icon" href="./img/favicon.ico" type="image/x-icon" />



	<link rel="stylesheet" href="./styles/loading.css">
	<link rel="stylesheet" href="./styles/main.css">

	<script src="//at.alicdn.com/t/font_1255783_7vng0wqm503.js"></script>
</head>
<body>
	<div id="siteWelcome" class="site-welcome active">
		<div class="loading"></div>
	</div>
	<div id="topNavBar" class="topNavBar ">
		<div class="toNavBar-inner clearfix">
			<a class="logo" href="">
				<span class="logo-p1">Tommy</span><span class="logo-p2">Jiang</span>
			</a>
			<nav class="menu">
				<ul class="clearfix">
					<li>
						<a href="#siteAbout">ABOUT</a>
					</li>
					<li>
						<a href="#siteSkill">SKILL</a>
					</li>
					<li>
						<a href="#siteExprience">EXPERIENCE</a>
					</li>
					<li >
						<a href="#siteBlog">BLOG</a>
						<ul class="submenu ">
							<li><a href="javascript:;">test2asdasdsa</a></li>
							<li><a href="javascript:;">test2</a></li>
							<li><a href="javascript:;">test2</a></li>
						</ul>
					</li>
					<li>
						<a href="javascript:;">CALENDAR</a>
					</li>
					<li>
						<a href="./effects/index.html" target="_blank">OTHERS</a>
					</li>
					<li class="" >
						<a href="#siteDemo">DEMOS</a>
						<ul class="submenu ">
							<li><a href="./effects/old-cv/index.html">Portfolio</a></li>
							<li><a href="http://effects.tommywhy.com/nav-demo/index.html">Private Navigation</a></li>
							<li><a href="http://vuecv.tommywhy.com/">Vue CV</a></li>
						</ul>
					</li>
				</ul>
			</nav>
		</div>
	</div>
    <div class="banner">
	    <div class="mask"></div>
    </div>

	<main data-x id="siteAbout" style=" margin-top: -300px">
		<div class="userCard">
			<div class="pictureAndText clearfix">
				<div class="picture">
					<div class="avatar"></div>
					<!--<img src="./img/avatar.jpeg" alt="">-->
				</div>
				<div class="text">
					<div class="summary">
						<span class="welcome">
							Hello
							<span class="triangle"></span>
						</span>
						<h1>Tommy Jiang</h1>
						<h2>Full Stack Web Developer</h2>
						<hr>
						<dl>
							<dt>Age</dt>
							<dd>29</dd>
							<dt>Location</dt>
							<dd>Auckland</dd>
							<dt>Email</dt>
							<dd>tommywhy1989@gmail.com</dd>
						</dl>
					</div>
				</div>
			</div>
			<footer class="media">

				<a href=""><svg class="icon" aria-hidden="true">
					<use xlink:href="#icon-GitHub"></use>
				</svg></a>
				<a href=""><svg class="icon" aria-hidden="true">
					<use xlink:href="#icon-facebook"></use>
				</svg></a>
				<a href=""><svg class="icon" aria-hidden="true">
					<use xlink:href="#icon-linkedin"></use>
				</svg></a>


			</footer>
		</div>

		<div class="downloadCV-wrapper" >
			<a class="downloadCV" target="_blank"  href="./img/TommyJiang.pdf">DOWNLOAD RESUME  </a>
		</div>
		<p class="selfIntroduction">
			Hello! I’m Tommy Jiang. Junior Web Developer specializing in front end development. Experienced with all stages of the development cycle for dynamic web projects. Well-versed in numerous programming languages including JavaScript, SQL, and PHP background in project management and customer relations.
		</p>
	</main>

	<section  data-x  id="siteSkill" class="skills">
		<h2>
			Professional Skills
		</h2>
		<ol class="clearfix">
			<li>
				<h3>THML5 &amp; CSS3</h3>
				<div class="progressBar">
					<div class="progress" style="width: 95%;">

					</div>
				</div>
			</li>
			<li>
				<h3>MySQL</h3>
				<div class="progressBar">
					<div class="progress" style="width: 65%;">

					</div>
				</div>
			</li>
			<li>
				<h3>Javascript</h3>
				<div class="progressBar">
					<div class="progress" style="width: 75%;">

					</div>
				</div>
			</li>
			<li>
				<h3>Vue</h3>
				<div class="progressBar">
					<div class="progress" style="width: 65%;">

					</div>
				</div>
			</li>
			<li>
				<h3>Laravel</h3>
				<div class="progressBar">
					<div class="progress" style="width: 85%;">

					</div>
				</div>
			</li>
			<li>
				<h3>Magento2</h3>
				<div class="progressBar">
					<div class="progress" style="width: 75%;">

					</div>
				</div>
			</li>
		</ol>
	</section>

	<section  data-x  id="siteDemo" class="portfolio">
		<h2>Portfolio</h2>
		<nav>
			<ol class="clearfix">
				<li id="portfolio1">All</li>
				<li id="portfolio2">Framework</li>
				<li id="portfolio3">JS &amp; CSS</li>
			</ol>
			<div id="portfolioBar" class="bar state-1">
				<div class="bar-inner"></div>
			</div>
		</nav>
		<div class="works">
			<div class="big" style="top:0;left:0;">
				<img src="./img/portfolio1.jpg" alt="">ƒ
			</div>
			<div class="small"  style="top:0;left:637px;">
				<img src="./img/portfolio2.jpg" alt="">
			</div>
			<div class="small"  style="top:293px;left:637px;">
				<img src="./img/portfolio2.jpg" alt="">
			</div>
		</div>
	</section>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.4.0/Tween.min.js"></script>

	<script>
        function findClosestElement() {
            let specialTags = document.querySelectorAll('[data-x]')
            let minIndex = 0;
            for(let i = 1; i < specialTags.length ; i++){
//                console.log(specialTags[i].offsetTop,'specialTags[i].offsetTop')
                if( Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)){
                    minIndex = i;
                }
            }
            console.log('minIndex',minIndex)
            specialTags[minIndex].classList.remove('offset')

            let id = specialTags[minIndex].id;
//	        console.log(id)
            let heightLightLi = document.querySelector('a[href="#'+ id +'"]').parentNode;
            let navLists = heightLightLi.parentNode.children;
            console.log(navLists)
            for(let i = 0; i < navLists.length; i ++){
                navLists[i].classList.remove('highlight')
            }
            heightLightLi.classList.add('highlight')
        }

        window.onload = function () {
            siteWelcome.classList.remove('active')
            findClosestElement()
        }


        let specialTags = document.querySelectorAll('[data-x]')
        for(let i = 0; i < specialTags.length ; i++){
            specialTags[i].classList.add('offset')
            }


        window.onscroll = function (e){
	        console.log('window.scrollY',window.scrollY)
	        //反向高亮导航

            findClosestElement()

			//nav sticky
	        if(window.scrollY > 0){
                topNavBar.classList.add('sticky')
	        }else {
                topNavBar.classList.remove('sticky')
	        }
        }



        let liTags = document.querySelectorAll('nav.menu > ul > li')
//        console.log(liTags)
		for (let i = 0; i < liTags.length; i++){
            liTags[i].onmouseenter = function (e) {
	             e.currentTarget.classList.add('active');
            }

            liTags[i].onmouseleave = function (e) {
                e.currentTarget.classList.remove('active');
            }
		}

		let aTags = document.querySelectorAll('nav.menu > ul > li > a')

/*tween.js*/
        // Setup the animation loop.
        function animate(time) {
            requestAnimationFrame(animate);
            TWEEN.update(time);
        }
        requestAnimationFrame(animate);




		for(let i = 0; i < aTags.length; i++){
            aTags[i].onclick = function (e) {
//                e.preventDefault()
	            /*======================*/
                console.log(e.currentTarget.getAttribute('href')) //打印 锚点
				let href = e.currentTarget.getAttribute('href')
	            let element = document.querySelector(href)
	            let top = element.offsetTop;
                let targetTop = top - 100;
                let currentTop = window.scrollY;
				let s = targetTop - currentTop //向上滑动 s 为负值
				let t = Math.abs( (s/100) * 300); // 时间不能是负数，所以取绝对值
				if(t>500){
				    t = 500
				}
                const coords = { x: 0, y: currentTop };

                const tween = new TWEEN.Tween(coords)
                    .to({ x: 0, y: targetTop }, t )
                    .easing(TWEEN.Easing.Quadratic.InOut)
                    .onUpdate(() => {
//                        box.style.setProperty('transform', `translate(${coords.x}px, ${coords.y}px)`);
	                    window.scrollTo(0,coords.y)
                    })
                    .start();

               /* let targetTop = top - 100;
                let n = 25;
                let duration = 500/n; // t
                let currentTop = window.scrollY;
				let distance = (targetTop - currentTop)/n //s
	            let i = 0
                let id = setInterval( ()=>{
                    if(i ===n){
                        window.clearInterval(id)
	                    return ;
                    }
                    i = i + 1;
                    window.scrollTo( 0, currentTop + distance * i)
                },duration)*/

            }
		}

	</script>
 </body>
</html>
<script>

    portfolio1.onclick =function () {
        portfolioBar.className='bar state-1'
    };
    portfolio2.onclick =function () {
        portfolioBar.className='bar state-2'
    };
    portfolio3.onclick =function () {
        portfolioBar.className='bar state-3'
    }


</script>